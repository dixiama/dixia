<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title> DixiLand- Juegos</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(180deg, #eafaf1, #ffffff);
      margin: 0;
      padding: 30px;
      color: #0f172a;
    }
    h1 {
      text-align: center;
      color: #0a0e71;
    }
    .stats {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    .stat {
      background: white;
      border-radius: 14px;
      padding: 15px 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      text-align: center;
    }
    .stat strong {
      font-size: 20px;
      display: block;
      margin-top: 5px;
    }
    .unit {
      max-width: 500px;
      margin: 20px auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.1);
      padding: 20px;
    }
    .unit h2 {
      margin-top: 0;
      color: #2a2258;
    }
    .lesson {
      cursor: pointer;
      padding: 15px;
      margin: 10px 0;
      border-radius: 12px;
      background: #f7fffb;
      border: 1px solid #d7f2e5;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 500;
      transition: 0.2s;
    }
    .lesson:hover {
      background: #e9fff3;
    }
    .lesson.completed {
      background: linear-gradient(90deg, #1d3689, #0d0d58);
      color: white;
      border: none;
    }
    .lesson.locked {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .lesson .icon {
      font-size: 22px;
    }
    #modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center; align-items: center;
      z-index: 1000;
    }
    #modalContent {
      background: #fff;
      padding: 25px;
      border-radius: 14px;
      width: 320px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      animation: fadeIn 0.3s ease;
    }
    #modalContent h3 {
      margin-top: 0;
      color: #1a1253;
    }
    input {
      margin-top: 10px;
      padding: 8px;
      width: 80%;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 15px;
      padding: 10px 15px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      background: #1c0d66;
      color: white;
      font-weight: bold;
    }
    button:hover {
      background: #261178;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>
</head>
<body>
  <h1>üìö DixiLand</h1>

  <div class="stats">
    <div class="stat">
      <div>üî• Nivel</div>
      <strong id="nivel">1</strong>
    </div>
    <div class="stat">
      <div>üíé Gems</div>
      <strong id="gems">0</strong>
    </div>
    <div class="stat">
      <div>üìñ Progreso</div>
      <strong><span id="completadas">0</span> / 6</strong>
    </div>
  </div>

  <!-- Unidad Matem√°ticas -->
  <div class="unit">
    <h2>Unidad 1: Matem√°ticas</h2>
    <div class="lesson" data-juego="sumaResta"><div class="icon">‚ûï</div> Suma y Resta</div>
    <div class="lesson locked" data-juego="multiplicacion"><div class="icon">‚úñÔ∏è</div> Multiplicaci√≥n</div>
    <div class="lesson locked" data-juego="division"><div class="icon">‚ûó</div> Divisi√≥n</div>
  </div>

  <!-- Unidad Dislexia -->
  <div class="unit">
    <h2>Unidad 2: Dislexia</h2>
    <div class="lesson locked" data-juego="completaPalabra"><div class="icon">üî§</div> Completa la palabra</div>
    <div class="lesson locked" data-juego="ordenaSilabas"><div class="icon">‚úçÔ∏è</div> Ordena las s√≠labas</div>
    <div class="lesson locked" data-juego="fraseSentido"><div class="icon">üëÄ</div> ¬øLa frase tiene sentido?</div>
  </div>

  <!-- Modal de juego -->
  <div id="modal">
    <div id="modalContent">
      <h3 id="pregunta"></h3>
      <input type="text" id="respuesta" placeholder="Tu respuesta">
      <br>
      <button id="btnResponder">Responder</button>
    </div>
  </div>

 <script>
let completadas = 0;
let gems = 0;

// Definici√≥n de unidades, lecciones y sub-niveles
const unidades = {
  matematica: {
    lecciones: [
      {
        nombre: "sumaResta",
        icon: "‚ûï",
        subNiveles: [
          { pregunta: "7 - 2", respuesta: "5" },
          { pregunta: "10 - 4", respuesta: "6" },
          { pregunta: "15 - 9", respuesta: "6" }
        ]
      },
      {
        nombre: "multiplicacion",
        icon: "‚úñÔ∏è",
        subNiveles: [
          { pregunta: "3 √ó 4", respuesta: "12" },
          { pregunta: "6 √ó 7", respuesta: "42" },
          { pregunta: "8 √ó 9", respuesta: "72" }
        ]
      },
      {
        nombre: "division",
        icon: "‚ûó",
        subNiveles: [
          { pregunta: "10 √∑ 2", respuesta: "5" },
          { pregunta: "42 √∑ 7", respuesta: "6" },
          { pregunta: "81 √∑ 9", respuesta: "9" }
        ]
      }
    ]
  },
  
  dislexia: {
  lecciones: [
    {
      nombre: "completaPalabra",
      icon: "‚úèÔ∏è",
      subNiveles: [
        { pregunta: "El g__to est√° en la casa", respuesta: "gato" },
        { pregunta: "La c___ra es blanca", respuesta: "cabra" },
        { pregunta: "El so__ es amarillo", respuesta: "sol" }
      ]
    },
    {
      nombre: "ordenaSilabas",
      icon: "üî§",
      subNiveles: [
        { pregunta: "Ordena: to-ga ‚Üí ? ", respuesta: "gato" },
        { pregunta: "Ordena: ra-cab ‚Üí ? ", respuesta: "cabra" },
        { pregunta: "Ordena: lo-s ‚Üí ? ", respuesta: "sol" }
      ]
    },
    {
      nombre: "fraseSentido",
      icon: "üí¨",
      subNiveles: [
        { pregunta: "La luna es de queso", respuesta: "no" },
        { pregunta: "El perro ladra", respuesta: "si" },
        { pregunta: "El cielo es verde", respuesta: "no" }
      ]
    }
  ]
}
};

// Progreso del jugador por unidad
let progreso = {
  matematica: { leccion: 0, subNivel: 0 },
  dislexia: { leccion: 0, subNivel: 0 }
};

// Mensaje de feedback
const feedback = document.createElement('div');
feedback.id = 'feedback';
feedback.style.marginTop = '10px';
feedback.style.fontWeight = 'bold';
document.getElementById('modalContent').appendChild(feedback);

// Manejo de clicks en lecciones
document.querySelectorAll('.lesson').forEach(lesson => {
  lesson.addEventListener('click', () => {
    if(lesson.classList.contains("locked")) return;

    const juego = lesson.dataset.juego;

    // Determinar unidad
    let unidad = null;
    for(const key in unidades) {
      if(unidades[key].lecciones.some(l => l.nombre === juego)) {
        unidad = key;
        break;
      }
    }

    if(unidad) abrirLeccion(unidad, lesson);
  });
});

// Abrir lecci√≥n: empieza desde el sub-nivel actual
function abrirLeccion(unidad, lessonEl) {
  const { leccion, subNivel } = progreso[unidad];
  const nivelActual = unidades[unidad].lecciones[leccion].subNiveles[subNivel];
  mostrarJuego(nivelActual.pregunta, nivelActual.respuesta, unidad, lessonEl);
}

// Avanzar sub-nivel o lecci√≥n
function avanzarSubNivel(unidad, lessonEl) {
  let prog = progreso[unidad];
  const leccionActual = unidades[unidad].lecciones[prog.leccion];

  if(prog.subNivel + 1 < leccionActual.subNiveles.length) {
    // Siguiente sub-nivel
    prog.subNivel++;
    abrirLeccion(unidad, lessonEl); // Mostrar siguiente autom√°ticamente
  } else {
    // Lecci√≥n completada -> desbloquear siguiente lecci√≥n
    prog.leccion++;
    prog.subNivel = 0;

    const siguienteLeccion = unidades[unidad].lecciones[prog.leccion];
    if(siguienteLeccion) {
      const el = document.querySelector(`[data-juego="${siguienteLeccion.nombre}"]`);
      if(el) el.classList.remove("locked");
    } else {
      // Si no hay m√°s lecciones en esta unidad -> pasar a la siguiente unidad
      const unidadesKeys = Object.keys(unidades);
      const indiceUnidadActual = unidadesKeys.indexOf(unidad);
      const siguienteUnidad = unidadesKeys[indiceUnidadActual + 1];

      if(siguienteUnidad) {
        // Desbloquear la primera lecci√≥n de la siguiente unidad
        const primeraLeccion = unidades[siguienteUnidad].lecciones[0];
        if(primeraLeccion) {
          const el = document.querySelector(`[data-juego="${primeraLeccion.nombre}"]`);
          if(el) el.classList.remove("locked");
        }
      }
    }

    // Cerrar modal al terminar la lecci√≥n
    cerrarModal();
  }
}


// Mostrar modal con feedback
function mostrarJuego(pregunta, respuestaCorrecta, unidad, lessonEl) {
  document.getElementById('modal').style.display = 'flex';
  document.getElementById('pregunta').innerText = pregunta;
  document.getElementById('respuesta').value = '';
  feedback.innerText = '';

  const btn = document.getElementById('btnResponder');

  // Limpiar listener anterior
  const newBtn = btn.cloneNode(true);
  btn.parentNode.replaceChild(newBtn, btn);

  newBtn.onclick = function() {
    let respuesta = document.getElementById('respuesta').value.trim();
    if(respuesta.toLowerCase() === respuestaCorrecta.toLowerCase()) {
      feedback.style.color = 'green';
      feedback.innerText = '‚úÖ ¬°Correcto!';
      marcarCompletada(lessonEl);
      // Avanzar autom√°ticamente al siguiente sub-nivel
      setTimeout(() => avanzarSubNivel(unidad, lessonEl), 700); // peque√±o delay para ver el feedback
    } else {
      feedback.style.color = 'red';
      feedback.innerText = '‚ùå Intenta de nuevo';
    }
  };
}

// Marcar lecci√≥n completada
function marcarCompletada(lessonEl) {
  if (!lessonEl.classList.contains("completed")) {
    completadas++;
    gems += 50;
    lessonEl.classList.add("completed");
    actualizarProgreso();
  }
}

// Actualizar stats
function actualizarProgreso() {
  document.getElementById("completadas").textContent = completadas;
  document.getElementById("gems").textContent = gems;
}

// Cerrar modal
function cerrarModal() {
  document.getElementById('respuesta').value = "";
  feedback.innerText = '';
  document.getElementById('modal').style.display = 'none';
}

// Cerrar modal al hacer click afuera
document.getElementById('modal').addEventListener('click', (e) => {
  if(e.target.id === 'modal') cerrarModal();
});
</script>


</body>
</html>
